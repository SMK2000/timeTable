<%- include ('./partials/header') %>
<body class="bg-2">
<% if(foundArr[0] && foundArr[0].name){ %>
<div class="container examspacing">
    <div>
        <h1 class="text-left"><em><strong>Welcome, <%= titleCase(foundArr[0].name) %>!
            <span>
                <img class="float-right float-top hidden zoom" src="https://swd.bits-goa.ac.in/css/studentImg/<%= foundArr[0].id.substring(0,12) %>.jpg" >
            </span>
        </strong></em></h1>

        </div>
    <em><h2 class="space">Mid-Sem Schedule</h2></em>
    <% var mid = foundArr.sort(mcompare); %>
    <br><br>
    <!-- midsem timeTable -->
    <div class="cardspacing">
        <% for(var j=0;j<mid.length;){ %>
            <div class="ui cards">
            <%    for(var i=0;(i<3 && j<mid.length);i++,j++){ %>
                <div class="ui card zoom" onmouseover="bigImg(this)" onmouseout="normalImg(this)">
                    <div class="content">
                    <div class="header"><%= mid[j].courseid %><span class="float-right"> <%=mid[j].section %></span></div>
                    <div class="meta"><%= mid[j].coursename %></div>
                    <div class="description">
                    <p><em><strong><%= mid[j].midsemdate %></strong></em></p>
                    <p><%= mid[j].midsemtime %></p>
                        </div>
                    </div>
                </div>
        <%    } %>
            </div>
        <% } %>
    </div>
    <br><br>


    <em><h2>Compre Schedule</h2></em>
    <% var com = foundArr.sort(ccompare); %>
    <br><br>
    <!-- compre-timeTable     -->
    <div class="cardspacing">
        <% for(var j=0;j<com.length;){ %>
            <div class="ui cards">
            <%    for(var i=0;(i<3 && j<com.length);i++,j++){ %>
                <div class="ui card zoom" onmouseover="bigImg(this)" onmouseout="normalImg(this)">
                    <div class="content">
                    <div class="header"><%= com[j].courseid %><span class="float-right"> <%=com[j].section %></span></div>
                    <div class="meta"><%= com[j].coursename %></div>
                    <div class="description">
                    <p><em><strong><%= com[j].compredate %></strong></em></p>
                    <p><%= com[j].compretime %></p>
                        </div>
                    </div>
                </div>
        <%    } %>
            </div>
        <% } %>
    </div>
    <form action="/" method="get"><button class="fluid ui button mt-4">Check Another ID</button></form>
        <form action="https://forms.gle/fxgwEGmv19vR9jwUA">
            <button class="fluid ui button mt-0 mb-0" href="https://forms.gle/fxgwEGmv19vR9jwUA">Report Wrong Data</button>
        </form>
</div>


<% } else { if(foundArr) { %>
    <h1 class="text-center mt-5"><em><strong>Its so Lonely Here!!!<br>
                Did you enter your ID correctly<br>
        <a href="javascript:history.back()">Go Back</a>
        <form action="/" method="get"><button class="fluid ui button mt-4">Report Wrong Data</button></form>
    
    </strong></em></h1>   
    <% } else { %>
        <h1 class="text-center mt-5"><em><strong>Thats Wierd! Did you tampered with request!<br>
            Database didn't return object can you return feedback to me!<br>
        <a href="javascript:history.back()">Go Back</a>
        <form action="/" method="get"><button class="fluid ui button mt-4">Check Another ID</button></form>
        </strong></em></h1>
<% } }%>
<!-- here is function for sorting by date -->

<%
function mcompare( a, b ) {
    if ( a.midsemdate < b.midsemdate ){
      return -1;
    }
    if ( a.midsemdate > b.midsemdate ){
      return 1;
    }
    return 0;
  }
function ccompare( a, b ) {
    if ( a.compredate < b.compredate ){
      return -1;
    }
    if ( a.compredate > b.compredate ){
      return 1;
    }
    return 0;
  }
function titleCase(str) {
    var splitStr = str.toLowerCase().split(' ');
    for (var i = 0; i < splitStr.length; i++) {
        splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);     
    }
    return splitStr.join(' '); 
 }
%>
<%- include ('./partials/footer') %>